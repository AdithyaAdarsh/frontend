{"ast":null,"code":"import _regeneratorRuntime from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _createClass from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _inherits from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport BaseTransaction from './Base.js';\nimport { generateRequestFnFromLinks } from '../request.js';\nvar EmailChallengeTransaction = /*#__PURE__*/function (_BaseTransaction) {\n  _inherits(EmailChallengeTransaction, _BaseTransaction);\n  var _super = _createSuper(EmailChallengeTransaction);\n  function EmailChallengeTransaction(oktaAuth, options) {\n    var _this;\n    _classCallCheck(this, EmailChallengeTransaction);\n    _this = _super.call(this, oktaAuth, options);\n    var accessToken = options.accessToken,\n      res = options.res;\n    var id = res.id,\n      expiresAt = res.expiresAt,\n      profile = res.profile,\n      status = res.status,\n      _links = res._links;\n    _this.id = id;\n    _this.expiresAt = expiresAt;\n    _this.profile = profile;\n    _this.status = status;\n    _this.poll = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var fn;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            fn = generateRequestFnFromLinks({\n              oktaAuth: oktaAuth,\n              accessToken: accessToken,\n              methodName: 'poll',\n              links: _links,\n              transactionClassName: 'EmailStatusTransaction'\n            });\n            _context.next = 3;\n            return fn();\n          case 3:\n            return _context.abrupt(\"return\", _context.sent);\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    _this.verify = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(payload) {\n        var fn;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              fn = generateRequestFnFromLinks({\n                oktaAuth: oktaAuth,\n                accessToken: accessToken,\n                methodName: 'verify',\n                links: _links\n              });\n              _context2.next = 3;\n              return fn(payload);\n            case 3:\n              return _context2.abrupt(\"return\", _context2.sent);\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    return _this;\n  }\n  return _createClass(EmailChallengeTransaction);\n}(BaseTransaction);\nexport { EmailChallengeTransaction as default };","map":{"version":3,"names":["EmailChallengeTransaction","_BaseTransaction","_inherits","_super","_createSuper","oktaAuth","options","_this","_classCallCheck","call","accessToken","res","id","expiresAt","profile","status","_links","poll","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fn","wrap","_callee$","_context","prev","next","generateRequestFnFromLinks","methodName","links","transactionClassName","abrupt","sent","stop","verify","_ref2","_callee2","payload","_callee2$","_context2","_x","apply","arguments","_createClass","BaseTransaction"],"sources":["/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@okta/lib/myaccount/transactions/EmailChallengeTransaction.ts"],"sourcesContent":["import EmailStatusTransaction from './EmailStatusTransaction';\nimport { \n  EmailProfile, \n  Status,\n  VerificationPayload, \n} from '../types';\nimport BaseTransaction from './Base';\nimport { generateRequestFnFromLinks } from '../request';\n\nexport default class EmailChallengeTransaction extends BaseTransaction {\n  id: string;\n  expiresAt: string;\n  profile: EmailProfile;\n  status: Status;\n\n  poll: () => Promise<EmailStatusTransaction>;\n  // eslint-disable-next-line no-use-before-define\n  verify: (payload: VerificationPayload) => Promise<EmailChallengeTransaction>;\n\n  constructor(oktaAuth, options) {\n    super(oktaAuth, options);\n\n    const { accessToken, res } = options;\n    // assign required fields from res\n    const { id, expiresAt, profile, status, _links } = res;\n    this.id = id;\n    this.expiresAt = expiresAt;\n    this.profile = profile;\n    this.status = status;\n\n    // assign transformed fns to transaction\n    this.poll = async () => {\n      const fn = generateRequestFnFromLinks({ \n        oktaAuth, \n        accessToken, \n        methodName: 'poll', \n        links: _links,\n        transactionClassName: 'EmailStatusTransaction'\n      });\n      return await fn() as EmailStatusTransaction;\n    };\n    this.verify = async (payload) => {\n      const fn = generateRequestFnFromLinks({ \n        oktaAuth, \n        accessToken, \n        methodName: 'verify', \n        links: _links,\n      });\n      return await fn(payload) as EmailChallengeTransaction;\n    };\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;IASqBA,yBAA0B,0BAAAC,gBAAA;EAAAC,SAAA,CAAAF,yBAAA,EAAAC,gBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,yBAAA;EAU7C,SAAAA,0BAAYK,QAAQ,EAAEC,OAAO;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAR,yBAAA;IAC3BO,KAAA,GAAAJ,MAAA,CAAAM,IAAA,OAAMJ,QAAQ,EAAEC,OAAO;IAEvB,IAAQI,WAAW,GAAUJ,OAAO,CAA5BI,WAAW;MAAEC,GAAG,GAAKL,OAAO,CAAfK,GAAG;IAExB,IAAQC,EAAE,GAAyCD,GAAG,CAA9CC,EAAE;MAAEC,SAAS,GAA8BF,GAAG,CAA1CE,SAAS;MAAEC,OAAO,GAAqBH,GAAG,CAA/BG,OAAO;MAAEC,MAAM,GAAaJ,GAAG,CAAtBI,MAAM;MAAEC,MAAM,GAAKL,GAAG,CAAdK,MAAM;IAC9CT,KAAA,CAAKK,EAAE,GAAGA,EAAE;IACZL,KAAA,CAAKM,SAAS,GAAGA,SAAS;IAC1BN,KAAA,CAAKO,OAAO,GAAGA,OAAO;IACtBP,KAAA,CAAKQ,MAAM,GAAGA,MAAM;IAGpBR,KAAA,CAAKU,IAAI,gBAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA;MAAA,IAAAC,EAAA;MAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YACJL,EAAE,GAAGM,0BAA0B,CAAC;cACpCvB,QAAQ,EAARA,QAAQ;cACRK,WAAW,EAAXA,WAAW;cACXmB,UAAU,EAAE,MAAM;cAClBC,KAAK,EAAEd,MAAM;cACbe,oBAAoB,EAAE;YACvB,EAAC;YAAAN,QAAA,CAAAE,IAAA;YAAA,OACWL,EAAE,EAA4B;UAAA;YAAA,OAAAG,QAAA,CAAAO,MAAA,WAAAP,QAAA,CAAAQ,IAAA;UAAA;UAAA;YAAA,OAAAR,QAAA,CAAAS,IAAA;QAAA;MAAA,GAAAb,OAAA;IAAA,CAC5C;IACDd,KAAA,CAAK4B,MAAM;MAAA,IAAAC,KAAA,GAAAlB,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAiB,SAAOC,OAAO;QAAA,IAAAhB,EAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAgB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAd,IAAA,GAAAc,SAAA,CAAAb,IAAA;YAAA;cACpBL,EAAE,GAAGM,0BAA0B,CAAC;gBACpCvB,QAAQ,EAARA,QAAQ;gBACRK,WAAW,EAAXA,WAAW;gBACXmB,UAAU,EAAE,QAAQ;gBACpBC,KAAK,EAAEd;cACR,EAAC;cAAAwB,SAAA,CAAAb,IAAA;cAAA,OACWL,EAAE,CAACgB,OAAO,CAA8B;YAAA;cAAA,OAAAE,SAAA,CAAAR,MAAA,WAAAQ,SAAA,CAAAP,IAAA;YAAA;YAAA;cAAA,OAAAO,SAAA,CAAAN,IAAA;UAAA;QAAA,GAAAG,QAAA;MAAA,CACtD;MAAA,iBAAAI,EAAA;QAAA,OAAAL,KAAA,CAAAM,KAAA,OAAAC,SAAA;MAAA;IAAA;IAAC,OAAApC,KAAA;EACH;EAAA,OAAAqC,YAAA,CAAA5C,yBAAA;AAAA,EAzCoD6C,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}