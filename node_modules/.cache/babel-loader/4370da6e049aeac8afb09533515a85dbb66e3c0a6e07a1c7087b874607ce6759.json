{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./Login.css';import axios from'axios';import{useNavigate}from'react-router-dom';import{useOktaAuth}from'@okta/okta-react';import{useModerateCount}from'./ModerateCountContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var navigate=useNavigate();var _useOktaAuth=useOktaAuth(),oktaAuth=_useOktaAuth.oktaAuth;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),totalImageCount=_useState2[0],setTotalImageCount=_useState2[1];var _useModerateCount=useModerateCount(),moderateCount=_useModerateCount.moderateCount,setModerateCount=_useModerateCount.setModerateCount;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];useEffect(function(){axios.get('http://localhost:5000/image_count').then(function(response){setTotalImageCount(response.data.imageCount);}).catch(function(error){console.error('Error fetching image count:',error);});},[]);var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(moderateCount>0)){_context.next=13;break;}setIsLoading(true);_context.prev=2;_context.next=5;return oktaAuth.signInWithRedirect();case 5:_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](2);console.error('Login error:',_context.t0);setIsLoading(false);case 11:_context.next=15;break;case 13:console.error('Moderate count is invalid');setIsLoading(false);case 15:case\"end\":return _context.stop();}},_callee,null,[[2,7]]);}));return function handleLogin(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Number of Images Pending: \",totalImageCount]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Number of Images to Moderate\",value:moderateCount,onChange:function onChange(e){return setModerateCount(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,className:\"login-button\",disabled:isLoading,children:isLoading?'Logging In...':'Log In'}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"register-link\",children:\"Don't have an account? Register here\"})]})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","useNavigate","useOktaAuth","useModerateCount","jsx","_jsx","jsxs","_jsxs","Login","navigate","_useOktaAuth","oktaAuth","_useState","_useState2","_slicedToArray","totalImageCount","setTotalImageCount","_useModerateCount","moderateCount","setModerateCount","_useState3","_useState4","isLoading","setIsLoading","get","then","response","data","imageCount","catch","error","console","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","signInWithRedirect","t0","stop","apply","arguments","className","children","type","placeholder","value","onChange","e","target","onClick","disabled","to"],"sources":["/Users/aadar00/Documents/image-moderation-app/frontend/src/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport './Login.css';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { useOktaAuth } from '@okta/okta-react';\nimport { useModerateCount } from './ModerateCountContext';\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const { oktaAuth } = useOktaAuth();\n  const [totalImageCount, setTotalImageCount] = useState(0);\n  const { moderateCount, setModerateCount } = useModerateCount();\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    axios\n      .get('http://localhost:5000/image_count')\n      .then((response) => {\n        setTotalImageCount(response.data.imageCount);\n      })\n      .catch((error) => {\n        console.error('Error fetching image count:', error);\n      });\n  }, []);\n\n  const handleLogin = async () => {\n    if (moderateCount > 0) {\n      setIsLoading(true);\n\n      try {\n        // Redirect the user to the Okta sign-in page\n        await oktaAuth.signInWithRedirect();\n      } catch (error) {\n        console.error('Login error:', error);\n        setIsLoading(false);\n      }\n    } else {\n      console.error('Moderate count is invalid');\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-box\">\n        <h2>Login</h2>\n        <p>Total Number of Images Pending: {totalImageCount}</p>\n        <input\n          type=\"number\"\n          placeholder=\"Number of Images to Moderate\"\n          value={moderateCount}\n          onChange={(e) => setModerateCount(e.target.value)}\n        />\n        <button\n          onClick={handleLogin}\n          className=\"login-button\"\n          disabled={isLoading}\n        >\n          {isLoading ? 'Logging In...' : 'Log In'}\n        </button>\n        <Link to=\"/register\" className=\"register-link\">\n          Don't have an account? Register here\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}