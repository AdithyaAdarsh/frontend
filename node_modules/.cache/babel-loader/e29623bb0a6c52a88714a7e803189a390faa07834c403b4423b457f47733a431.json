{"ast":null,"code":"var _jsxFileName = \"/Users/aadar00/Library/CloudStorage/OneDrive-BlackhawkNetwork,Inc/Documents/image-moderation-app/frontend/src/LoginCallback.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginCallback = () => {\n  _s();\n  const navigate = useNavigate();\n  useEffect(() => {\n    var _oktaTokenData$access;\n    // Retrieve the access token from local storage\n    const oktaTokenStorage = localStorage.getItem('okta-token-storage');\n    if (!oktaTokenStorage) {\n      console.error('Okta token storage not found in local storage');\n      // Handle this error case, e.g., display a message to the user\n      return;\n    }\n    const oktaTokenData = JSON.parse(oktaTokenStorage);\n    if (!(oktaTokenData !== null && oktaTokenData !== void 0 && (_oktaTokenData$access = oktaTokenData.accessToken) !== null && _oktaTokenData$access !== void 0 && _oktaTokenData$access.value)) {\n      console.error('Access token not found in Okta token storage');\n      // Handle this error case, e.g., display a message to the user\n      return;\n    }\n    const accessToken = oktaTokenData.accessToken.value;\n    console.log('Retrieved access token:', accessToken);\n\n    // Send the access token to your server's /login endpoint\n    axios.post('http://localhost:5000/login', {\n      access_token: accessToken\n    }).then(response => {\n      if (response.data.access_token) {\n        // Store the token securely (localStorage or sessionStorage)\n        localStorage.setItem('token', response.data.access_token);\n\n        // Redirect to the /customer_service route\n        navigate('/customer_service');\n\n        // You can now navigate to the protected route if needed\n        // Example: navigate('/customer_service');\n      } else {\n        console.error('Access token not received');\n        // Handle this error case, e.g., display a message to the user\n      }\n    }).catch(error => {\n      console.error('Error sending token to server:', error);\n      // Handle this error case, e.g., display a message to the user\n    });\n  }, [navigate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Logging in...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 10\n  }, this);\n};\n_s(LoginCallback, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginCallback;\nexport default LoginCallback;\nvar _c;\n$RefreshReg$(_c, \"LoginCallback\");","map":{"version":3,"names":["React","useEffect","axios","useNavigate","jsxDEV","_jsxDEV","LoginCallback","_s","navigate","_oktaTokenData$access","oktaTokenStorage","localStorage","getItem","console","error","oktaTokenData","JSON","parse","accessToken","value","log","post","access_token","then","response","data","setItem","catch","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/aadar00/Library/CloudStorage/OneDrive-BlackhawkNetwork,Inc/Documents/image-moderation-app/frontend/src/LoginCallback.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nconst LoginCallback = () => {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Retrieve the access token from local storage\n    const oktaTokenStorage = localStorage.getItem('okta-token-storage');\n    \n    if (!oktaTokenStorage) {\n      console.error('Okta token storage not found in local storage');\n      // Handle this error case, e.g., display a message to the user\n      return;\n    }\n\n    const oktaTokenData = JSON.parse(oktaTokenStorage);\n\n    if (!oktaTokenData?.accessToken?.value) {\n      console.error('Access token not found in Okta token storage');\n      // Handle this error case, e.g., display a message to the user\n      return;\n    }\n\n    const accessToken = oktaTokenData.accessToken.value;\n\n    console.log('Retrieved access token:', accessToken);\n\n    // Send the access token to your server's /login endpoint\n    axios\n      .post('http://localhost:5000/login', { access_token: accessToken })\n      .then((response) => {\n        if (response.data.access_token) {\n          // Store the token securely (localStorage or sessionStorage)\n          localStorage.setItem('token', response.data.access_token);\n\n          // Redirect to the /customer_service route\n          navigate('/customer_service');\n\n          // You can now navigate to the protected route if needed\n          // Example: navigate('/customer_service');\n        } else {\n          console.error('Access token not received');\n          // Handle this error case, e.g., display a message to the user\n        }\n      })\n      .catch((error) => {\n        console.error('Error sending token to server:', error);\n        // Handle this error case, e.g., display a message to the user\n      });\n  }, [navigate]);\n\n  return <div>Logging in...</div>;\n};\n\nexport default LoginCallback;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IAAA,IAAAQ,qBAAA;IACd;IACA,MAAMC,gBAAgB,GAAGC,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC;IAEnE,IAAI,CAACF,gBAAgB,EAAE;MACrBG,OAAO,CAACC,KAAK,CAAC,+CAA+C,CAAC;MAC9D;MACA;IACF;IAEA,MAAMC,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACP,gBAAgB,CAAC;IAElD,IAAI,EAACK,aAAa,aAAbA,aAAa,gBAAAN,qBAAA,GAAbM,aAAa,CAAEG,WAAW,cAAAT,qBAAA,eAA1BA,qBAAA,CAA4BU,KAAK,GAAE;MACtCN,OAAO,CAACC,KAAK,CAAC,8CAA8C,CAAC;MAC7D;MACA;IACF;IAEA,MAAMI,WAAW,GAAGH,aAAa,CAACG,WAAW,CAACC,KAAK;IAEnDN,OAAO,CAACO,GAAG,CAAC,yBAAyB,EAAEF,WAAW,CAAC;;IAEnD;IACAhB,KAAK,CACFmB,IAAI,CAAC,6BAA6B,EAAE;MAAEC,YAAY,EAAEJ;IAAY,CAAC,CAAC,CAClEK,IAAI,CAAEC,QAAQ,IAAK;MAClB,IAAIA,QAAQ,CAACC,IAAI,CAACH,YAAY,EAAE;QAC9B;QACAX,YAAY,CAACe,OAAO,CAAC,OAAO,EAAEF,QAAQ,CAACC,IAAI,CAACH,YAAY,CAAC;;QAEzD;QACAd,QAAQ,CAAC,mBAAmB,CAAC;;QAE7B;QACA;MACF,CAAC,MAAM;QACLK,OAAO,CAACC,KAAK,CAAC,2BAA2B,CAAC;QAC1C;MACF;IACF,CAAC,CAAC,CACDa,KAAK,CAAEb,KAAK,IAAK;MAChBD,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC,CAAC;EACN,CAAC,EAAE,CAACN,QAAQ,CAAC,CAAC;EAEd,oBAAOH,OAAA;IAAAuB,QAAA,EAAK;EAAa;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AACjC,CAAC;AAACzB,EAAA,CAlDID,aAAa;EAAA,QACAH,WAAW;AAAA;AAAA8B,EAAA,GADxB3B,aAAa;AAoDnB,eAAeA,aAAa;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}