{"ast":null,"code":"import _objectSpread from\"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import'./DynamoDBData.css';import{useLocation}from'react-router-dom';// Import useLocation hook\nimport{useModerateCount}from'./ModerateCountContext';import jwt_decode from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DynamoDBData=function DynamoDBData(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),usernameError=_useState2[0],setUsernameError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),reasonError=_useState4[0],setReasonError=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedImage=_useState8[0],setSelectedImage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showReasonPopup=_useState10[0],setShowReasonPopup=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),selectedItem=_useState12[0],setSelectedItem=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),reasonInput=_useState14[0],setReasonInput=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),usernameInput=_useState16[0],setUsernameInput=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),uuids=_useState18[0],setUuids=_useState18[1];// State to store UUIDs\nvar _useModerateCount=useModerateCount(),moderateCount=_useModerateCount.moderateCount;var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),newImages=_useState20[0],setNewImages=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),newImageCount=_useState22[0],setNewImageCount=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),fetchedImageUUIDs=_useState24[0],setFetchedImageUUIDs=_useState24[1];var _useState25=useState(0),_useState26=_slicedToArray(_useState25,2),imageCount=_useState26[0],setImageCount=_useState26[1];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),selectedStatus=_useState28[0],setSelectedStatus=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),isLoading=_useState30[0],setIsLoading=_useState30[1];var location=useLocation();var _ref=location.state||{},username=_ref.username;var token=localStorage.getItem('token');var headers={'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'};useEffect(function(){fetchDataFromServer();// Set to true after initial rendering\n},[]);var fetchImageCount=function fetchImageCount(){axios.get('http://localhost:5000/image_count').then(function(response){setImageCount(response.data.imageCount);}).catch(function(error){console.error('Error fetching image count:',error);});};var fetchDataFromServer=function fetchDataFromServer(){// Retrieve the session token and username from local storage\nvar sessionToken=localStorage.getItem('token');console.log(\"The session token is:\",sessionToken);if(!sessionToken){console.error('Session token not found');return;}var headers={'Authorization':\"Bearer \".concat(sessionToken)};axios.get(\"http://localhost:5000/fetch_new_images?moderate_count=\".concat(moderateCount),{headers:headers}).then(function(response){if(Array.isArray(response.data)){setData(response.data);var uuidList=response.data.map(function(item){return item.UUID;});setUuids(uuidList);console.log(response.data);console.log(\"UUID List:\",uuidList);}else{console.error(\"Response data is not an array:\",response.data);}}).catch(function(error){console.error('Error fetching data:',error);}).finally(function(){setIsLoading(false);// Reset loading state\n});};var fetchImagesByUUIDs=function fetchImagesByUUIDs(uuidList){axios.post('http://localhost:5000/fetch_images_by_uuid',{uuids:uuidList}).then(function(response){// Update state with the received images\nsetData(response.data);}).catch(function(error){console.error('Error fetching images:',error);});};var resetFetchedImageUUIDs=function resetFetchedImageUUIDs(){setFetchedImageUUIDs([]);// Reset the fetched image UUIDs in local state\n// Get the token from local storage or wherever you are storing it\nvar token=localStorage.getItem('token');// Check if the token is available\nif(token){var _headers={'Authorization':\"Bearer \".concat(token)};// Send a request to the server to clear the fetched UUIDs on the backend\naxios.post('http://localhost:5000/reset_fetched_uuids',null,{headers:_headers}).then(function(response){console.log('Fetched UUIDs reset:',response.data);}).catch(function(error){console.error('Error resetting fetched UUIDs:',error);});}else{console.error('Token not available.');}};var handleManualReview=function handleManualReview(item){setSelectedItem(item);setShowReasonPopup(true);setReasonInput('');// Set the initial status based on the current status of the item\nvar initialStatus=item.Manual_Status||item.Moderation_Results;setSelectedStatus(initialStatus);};var handlePopupCancel=function handlePopupCancel(){setShowReasonPopup(false);setSelectedItem(null);};var handlePageRefresh=function handlePageRefresh(){resetFetchedImageUUIDs();// You can also perform any other necessary cleanup here\n};useEffect(function(){//fetchDataFromServer();\n// Add an event listener for page refresh\nwindow.addEventListener('beforeunload',handlePageRefresh);// Remove the event listener when the component unmounts\nreturn function(){resetFetchedImageUUIDs();// Reset fetched UUIDs when the component unmounts\nwindow.removeEventListener('beforeunload',handlePageRefresh);};},[]);var fetchNewImages=function fetchNewImages(){// Get the JWT token from your storage (localStorage or sessionStorage)\nvar token=localStorage.getItem('token');// Replace with your storage method\n// Configure headers with the JWT token\nvar headers={Authorization:\"Bearer \".concat(token)};axios.get(\"http://localhost:5000/fetch_new_images?count=\".concat(newImageCount,\"&uuids=\").concat(uuids.join(',')),{headers:headers}).then(function(response){if(response.data.message){alert(response.data.message);}else{var newImagesData=response.data;setNewImages(function(prevImages){return[].concat(_toConsumableArray(prevImages),_toConsumableArray(newImagesData));});}}).catch(function(error){console.error('Error fetching new images:',error);});};var handleReasonSubmit=function handleReasonSubmit(status){if(selectedItem&&reasonInput.trim()!==''){// Reset error states\nsetUsernameError(false);setReasonError(false);var timestamp=new Date().toISOString();var formattedTimestamp=\"(\".concat(timestamp,\")\");var updatedReason=\"\".concat(selectedItem.reason_for_change||'',\"\\n\").concat(reasonInput,\" \").concat(formattedTimestamp,\" (by \").concat(username||usernameInput,\")\");var updatedItem={uuid:selectedItem.UUID,manual_status:status,// Use the provided status (Approved or Rejected)\nreason_for_change:updatedReason,username:username||usernameInput};axios.post('http://localhost:5000/update_manual_status',updatedItem).then(function(response){console.log('Update successful:',response.data);// Fetch images by UUIDs using the POST method\nconsole.log(\"The uuids are:\",uuids);fetchImagesByUUIDs(uuids);// Check if the selectedItem is in the newImages array and update its status\nvar updatedNewImages=newImages.map(function(img){return img.UUID===selectedItem.UUID?_objectSpread(_objectSpread({},img),{},{Manual_Status:status,Reason_For_Change:updatedReason,username:updatedItem.username}):img;});// Update the state with the updated newImages\nsetNewImages(updatedNewImages);setShowReasonPopup(false);setSelectedItem(null);}).catch(function(error){console.error('Error updating status:',error);});}else{// Set error states if inputs are empty\nif(!usernameInput.trim()){setUsernameError(true);}if(!reasonInput.trim()){setReasonError(true);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Moderation Results\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"center-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"refresh-button\",onClick:fetchImageCount,children:[\"Refresh Image Count: \",imageCount]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"center-input-button\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newImageCount,onChange:function onChange(event){return setNewImageCount(parseInt(event.target.value));},placeholder:\"Enter number of new images\",className:\"new-images-input\"}),/*#__PURE__*/_jsx(\"button\",{className:\"fetch-button\",onClick:fetchNewImages,children:\"Fetch New Images\"})]})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"File Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"AWS Results\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TenantID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"UUID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reason\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Manual Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reason for Change\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Change Status\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[(data===null||data===void 0?void 0:data.length)>0?data.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.file_name}),/*#__PURE__*/_jsx(\"td\",{className:item.Moderation_Results==='Approved'?'approved text-success':'text-danger',children:item.Moderation_Results}),/*#__PURE__*/_jsx(\"td\",{children:item.TenantID}),/*#__PURE__*/_jsx(\"td\",{children:item.UUID}),/*#__PURE__*/_jsx(\"td\",{children:item.Reason&&JSON.parse(item.Reason).moderation_labels?JSON.parse(item.Reason).moderation_labels.map(function(label){return label.Name;}).join(', '):'NIL'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-label \".concat(item.Manual_Status==='Approved'?'approved':item.Manual_Status==='Pending'// Apply the \"pending\" class when Manual_Status is \"Pending\"\n?'pending':'rejected'),children:item.Manual_Status?item.Manual_Status:item.Moderation_Results})}),/*#__PURE__*/_jsx(\"td\",{children:item.Reason_For_Change?item.Reason_For_Change.split('\\n').map(function(line,index){return/*#__PURE__*/_jsx(\"div\",{children:line},index);}):'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"https://gc-cms-test-bucket.s3.ap-south-1.amazonaws.com/\".concat(item.file_name),alt:\"Preview of \".concat(item.file_name),className:\"preview-image\",onClick:function onClick(){return setSelectedImage(\"https://gc-cms-test-bucket.s3.ap-south-1.amazonaws.com/\".concat(item.file_name));}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleManualReview(item);},className:\"button\",children:\"Change Status\"})})]},index);}):/*#__PURE__*/_jsx(\"tr\",{}),(newImages===null||newImages===void 0?void 0:newImages.length)>0&&newImages.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.file_name}),/*#__PURE__*/_jsx(\"td\",{className:item.Moderation_Results==='Approved'?'approved text-success':'text-danger',children:item.Moderation_Results}),/*#__PURE__*/_jsx(\"td\",{children:item.TenantID}),/*#__PURE__*/_jsx(\"td\",{children:item.UUID}),/*#__PURE__*/_jsx(\"td\",{children:item.Reason&&JSON.parse(item.Reason).moderation_labels?JSON.parse(item.Reason).moderation_labels.map(function(label,labelIndex){return/*#__PURE__*/_jsxs(\"span\",{children:[label.Name,\", \"]},labelIndex);}):'NIL'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-label \".concat(item.Manual_Status==='Approved'?'approved':'rejected'),children:item.Manual_Status?item.Manual_Status:item.Moderation_Results})}),/*#__PURE__*/_jsx(\"td\",{children:item.Reason_For_Change?item.Reason_For_Change.split('\\n').map(function(line,index){return/*#__PURE__*/_jsx(\"div\",{children:line},index);}):'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"https://gc-cms-test-bucket.s3.ap-south-1.amazonaws.com/\".concat(item.file_name),alt:\"Preview of \".concat(item.file_name),className:\"preview-image\",onClick:function onClick(){return setSelectedImage(\"https://gc-cms-test-bucket.s3.ap-south-1.amazonaws.com/\".concat(item.file_name));}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleManualReview(item);},className:\"button\",children:\"Change Status\"})})]},\"new-\".concat(index));})]})]}),selectedImage&&/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview-popup\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedImage,alt:\"Selected Preview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setSelectedImage(null);},children:\"Close Preview\"})]}),showReasonPopup&&selectedItem&&/*#__PURE__*/_jsx(\"div\",{className:\"popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:handlePopupCancel,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Reason for Status Change\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-container \".concat(usernameError?'error':''),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"usernameInput\",children:\"Name:\\xA0\\xA0\\xA0\\xA0\\xA0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"usernameInput\",value:usernameInput,onChange:function onChange(event){return setUsernameInput(event.target.value);},placeholder:\"Enter your username\"}),usernameError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"Please enter a username.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container \".concat(reasonError?'error':''),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"reasonInput\",children:\"Reason:\\xA0\\xA0\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"reasonInput\",value:reasonInput,onChange:function onChange(event){return setReasonInput(event.target.value);},placeholder:\"Enter reason here...\"}),reasonError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"Please enter a reason.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleReasonSubmit('Approved');},className:\"approve-button\",children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleReasonSubmit('Rejected');},className:\"reject-button\",children:\"Reject\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePopupCancel,className:\"cancel\",children:\"Cancel\"})]})]})]})})]});};export default DynamoDBData;","map":{"version":3,"names":["React","useState","useEffect","axios","useLocation","useModerateCount","jwt_decode","jsx","_jsx","jsxs","_jsxs","DynamoDBData","_useState","_useState2","_slicedToArray","usernameError","setUsernameError","_useState3","_useState4","reasonError","setReasonError","_useState5","_useState6","data","setData","_useState7","_useState8","selectedImage","setSelectedImage","_useState9","_useState10","showReasonPopup","setShowReasonPopup","_useState11","_useState12","selectedItem","setSelectedItem","_useState13","_useState14","reasonInput","setReasonInput","_useState15","_useState16","usernameInput","setUsernameInput","_useState17","_useState18","uuids","setUuids","_useModerateCount","moderateCount","_useState19","_useState20","newImages","setNewImages","_useState21","_useState22","newImageCount","setNewImageCount","_useState23","_useState24","fetchedImageUUIDs","setFetchedImageUUIDs","_useState25","_useState26","imageCount","setImageCount","_useState27","_useState28","selectedStatus","setSelectedStatus","_useState29","_useState30","isLoading","setIsLoading","location","_ref","state","username","token","localStorage","getItem","headers","concat","fetchDataFromServer","fetchImageCount","get","then","response","catch","error","console","sessionToken","log","Array","isArray","uuidList","map","item","UUID","finally","fetchImagesByUUIDs","post","resetFetchedImageUUIDs","handleManualReview","initialStatus","Manual_Status","Moderation_Results","handlePopupCancel","handlePageRefresh","window","addEventListener","removeEventListener","fetchNewImages","Authorization","join","message","alert","newImagesData","prevImages","_toConsumableArray","handleReasonSubmit","status","trim","timestamp","Date","toISOString","formattedTimestamp","updatedReason","reason_for_change","updatedItem","uuid","manual_status","updatedNewImages","img","_objectSpread","Reason_For_Change","className","children","onClick","type","value","onChange","event","parseInt","target","placeholder","length","index","file_name","TenantID","Reason","JSON","parse","moderation_labels","label","Name","split","line","src","alt","labelIndex","htmlFor","id"],"sources":["/Users/aadar00/Documents/image-moderation-app/frontend/src/DynamoDBData.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './DynamoDBData.css';\nimport { useLocation } from 'react-router-dom'; // Import useLocation hook\nimport { useModerateCount } from './ModerateCountContext';\nimport jwt_decode from 'jwt-decode';\n\n\n\nconst DynamoDBData = () => {\n  const [usernameError, setUsernameError] = useState(false);\n  const [reasonError, setReasonError] = useState(false);\n  const [data, setData] = useState([]);\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [showReasonPopup, setShowReasonPopup] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [reasonInput, setReasonInput] = useState('');\n  const [usernameInput, setUsernameInput] = useState('');\n  const [uuids, setUuids] = useState([]); // State to store UUIDs\n  const { moderateCount } = useModerateCount();\n  const [newImages, setNewImages] = useState([]); \n  const [newImageCount, setNewImageCount] = useState([]);\n  const [fetchedImageUUIDs, setFetchedImageUUIDs] = useState([]);\n  const [imageCount, setImageCount] = useState(0);\n  const [selectedStatus, setSelectedStatus] = useState(''); \n  const [isLoading, setIsLoading] = useState(false);\n  const location = useLocation();\n  const { username } = location.state || {};\n  const token = localStorage.getItem('token'); \n  \n  const headers = {\n    'Authorization': `Bearer ${token}`,\n    'Content-Type': 'application/json'\n  };\n  useEffect(() => {\n\n      fetchDataFromServer();\n   // Set to true after initial rendering\n  \n  }, []);\n\n  const fetchImageCount = () => {\n    axios.get('http://localhost:5000/image_count')\n      .then(response => {\n        setImageCount(response.data.imageCount);\n      })\n      .catch(error => {\n        console.error('Error fetching image count:', error);\n      });\n  };\n\n\n\n  const fetchDataFromServer = () => {\n    // Retrieve the session token and username from local storage\n    const sessionToken = localStorage.getItem('token');\n    console.log(\"The session token is:\", sessionToken);\n  \n    if (!sessionToken) {\n      console.error('Session token not found');\n      return;\n    }\n  \n    const headers = {\n      'Authorization': `Bearer ${sessionToken}`,\n    };\n  \n    axios.get(`http://localhost:5000/fetch_new_images?moderate_count=${moderateCount}`, { headers })\n      .then(response => {\n        if (Array.isArray(response.data)) {\n          setData(response.data);\n          const uuidList = response.data.map(item => item.UUID);\n          setUuids(uuidList);\n          console.log(response.data);\n          console.log(\"UUID List:\", uuidList);\n        } else {\n          console.error(\"Response data is not an array:\", response.data);\n        }\n      })\n      .catch(error => {\n        console.error('Error fetching data:', error);\n      })\n      .finally(() => {\n        setIsLoading(false); // Reset loading state\n      });\n  };\n  \n  \n  \n  \n  \n  \n\n  const fetchImagesByUUIDs = (uuidList) => {\n    axios\n      .post('http://localhost:5000/fetch_images_by_uuid', { uuids: uuidList })\n      .then(response => {\n        // Update state with the received images\n        setData(response.data);\n      })\n      .catch(error => {\n        console.error('Error fetching images:', error);\n      });\n  };\n\n  const resetFetchedImageUUIDs = () => {\n    setFetchedImageUUIDs([]); // Reset the fetched image UUIDs in local state\n    // Get the token from local storage or wherever you are storing it\n    const token = localStorage.getItem('token');\n    \n    // Check if the token is available\n    if (token) {\n      const headers = {\n        'Authorization': `Bearer ${token}`\n      };\n      \n      // Send a request to the server to clear the fetched UUIDs on the backend\n      axios.post('http://localhost:5000/reset_fetched_uuids', null, { headers })\n        .then(response => {\n          console.log('Fetched UUIDs reset:', response.data);\n        })\n        .catch(error => {\n          console.error('Error resetting fetched UUIDs:', error);\n        });\n    } else {\n      console.error('Token not available.');\n    }\n  };\n  \n  \n  \n\n\n\n  const handleManualReview = (item) => {\n    setSelectedItem(item);\n    setShowReasonPopup(true);\n    setReasonInput('');\n\n    // Set the initial status based on the current status of the item\n    const initialStatus = item.Manual_Status || item.Moderation_Results;\n    setSelectedStatus(initialStatus);\n  };\n\n\n  const handlePopupCancel = () => {\n    setShowReasonPopup(false);\n    setSelectedItem(null);\n  };\n\n  const handlePageRefresh = () => {\n    resetFetchedImageUUIDs();\n    // You can also perform any other necessary cleanup here\n  };\n\n  useEffect(() => {\n    //fetchDataFromServer();\n  \n    // Add an event listener for page refresh\n    window.addEventListener('beforeunload', handlePageRefresh);\n  \n    // Remove the event listener when the component unmounts\n    return () => {\n      resetFetchedImageUUIDs(); // Reset fetched UUIDs when the component unmounts\n      window.removeEventListener('beforeunload', handlePageRefresh);\n    };\n  }, []);\n\n\n  const fetchNewImages = () => {\n    // Get the JWT token from your storage (localStorage or sessionStorage)\n    const token = localStorage.getItem('token'); // Replace with your storage method\n  \n    // Configure headers with the JWT token\n    const headers = {\n      Authorization: `Bearer ${token}`\n    };\n  \n    axios.get(`http://localhost:5000/fetch_new_images?count=${newImageCount}&uuids=${uuids.join(',')}`, { headers })\n      .then(response => {\n        if (response.data.message) {\n          alert(response.data.message);\n        } else {\n          const newImagesData = response.data;\n          setNewImages(prevImages => [...prevImages, ...newImagesData]);\n        }\n      })\n      .catch(error => {\n        console.error('Error fetching new images:', error);\n      });\n  };\n  \n  \n  \n\n  const handleReasonSubmit = (status) => {\n    if (selectedItem && reasonInput.trim() !== '') {\n      // Reset error states\n      setUsernameError(false);\n      setReasonError(false);\n  \n      const timestamp = new Date().toISOString();\n      const formattedTimestamp = `(${timestamp})`;\n      const updatedReason = `${selectedItem.reason_for_change || ''}\\n${reasonInput} ${formattedTimestamp} (by ${username|| usernameInput})`;\n  \n      const updatedItem = {\n        uuid: selectedItem.UUID,\n        manual_status: status, // Use the provided status (Approved or Rejected)\n        reason_for_change: updatedReason,\n        username: username || usernameInput,\n      };\n  \n      axios\n        .post('http://localhost:5000/update_manual_status', updatedItem)\n        .then(response => {\n          console.log('Update successful:', response.data);\n  \n          // Fetch images by UUIDs using the POST method\n          console.log(\"The uuids are:\", uuids);\n          fetchImagesByUUIDs(uuids);\n  \n          // Check if the selectedItem is in the newImages array and update its status\n          const updatedNewImages = newImages.map(img =>\n            img.UUID === selectedItem.UUID\n              ? { ...img, Manual_Status: status, Reason_For_Change: updatedReason, username: updatedItem.username }\n              : img\n          );\n  \n          // Update the state with the updated newImages\n          setNewImages(updatedNewImages);\n  \n          setShowReasonPopup(false);\n          setSelectedItem(null);\n        })\n        .catch(error => {\n          console.error('Error updating status:', error);\n        });\n    } else {\n      // Set error states if inputs are empty\n      if (!usernameInput.trim()) {\n        setUsernameError(true);\n      }\n      if (!reasonInput.trim()) {\n        setReasonError(true);\n      }\n    }\n  };\n  \n   \n  \n  \n\n  return (\n<div className=\"container\">\n  <h1>Moderation Results</h1>\n  <div className=\"center-buttons\">\n    <button className=\"refresh-button\" onClick={fetchImageCount}>\n      Refresh Image Count: {imageCount}\n    </button>\n    <br></br>\n    <div className=\"center-input-button\">\n        <input\n          type=\"number\"\n          value={newImageCount}\n          onChange={event => setNewImageCount(parseInt(event.target.value))}\n          placeholder=\"Enter number of new images\"\n          className=\"new-images-input\"\n        />\n        <button className=\"fetch-button\" onClick={fetchNewImages}>\n          Fetch New Images\n        </button>\n      </div>\n  </div>\n  <table>\n    <thead>\n      <tr>\n        <th>File Name</th>\n        <th>AWS Results</th>\n        <th>TenantID</th>\n        <th>UUID</th>\n        <th>Reason</th>\n        <th>Manual Status</th>\n        <th>Reason for Change</th>\n        <th>Image</th>\n        <th>Change Status</th>\n      </tr>\n    </thead>\n    <tbody>\n          {data?.length > 0 ? (\n            data.map((item, index) => (\n              <tr key={index}>\n                <td>{item.file_name}</td>\n                <td className={item.Moderation_Results === 'Approved' ? 'approved text-success' : 'text-danger'}>\n                  {item.Moderation_Results}\n                </td>\n                <td>{item.TenantID}</td>\n                <td>{item.UUID}</td>\n                <td>\n                  {item.Reason && JSON.parse(item.Reason).moderation_labels ? JSON.parse(item.Reason).moderation_labels.map(label => label.Name).join(', ') : 'NIL'}\n                </td>\n                <td>\n                <span\n                    className={`status-label ${\n                      item.Manual_Status === 'Approved'\n                        ? 'approved'\n                        : item.Manual_Status === 'Pending' // Apply the \"pending\" class when Manual_Status is \"Pending\"\n                        ? 'pending' \n                        : 'rejected'\n                    }`}\n                    >\n\n                    {item.Manual_Status ? item.Manual_Status : item.Moderation_Results}\n                  </span>\n                </td>\n                <td>\n                  {item.Reason_For_Change ? item.Reason_For_Change.split('\\n').map((line, index) => (\n                    <div key={index}>{line}</div>\n                  )) : 'N/A'}\n                </td>\n                <td>\n                  <img\n                    src={`https://gc-cms-test-bucket.s3.ap-south-1.amazonaws.com/${item.file_name}`}\n                    alt={`Preview of ${item.file_name}`}\n                    className=\"preview-image\"\n                    onClick={() =>\n                      setSelectedImage(`https://gc-cms-test-bucket.s3.ap-south-1.amazonaws.com/${item.file_name}`)\n                    }\n                  />\n                </td>\n                <td>\n                  <button onClick={() => handleManualReview(item)} className=\"button\">\n                    Change Status\n                  </button>\n                </td>\n              </tr>\n            ))\n          ) : (\n            <tr>\n              \n            </tr>\n          )}\n    {newImages?.length > 0 &&\n    newImages.map((item, index) => (\n      <tr key={`new-${index}`}>\n        <td>{item.file_name}</td>\n        <td\n          className={\n            item.Moderation_Results === 'Approved'\n              ? 'approved text-success'\n              : 'text-danger'\n          }\n        >\n          {item.Moderation_Results}\n        </td>\n        <td>{item.TenantID}</td>\n        <td>{item.UUID}</td>\n        <td>\n          {item.Reason &&\n          JSON.parse(item.Reason).moderation_labels ? (\n            JSON.parse(item.Reason).moderation_labels.map(\n              (label, labelIndex) => (\n                <span key={labelIndex}>{label.Name}, </span>\n              )\n            )\n          ) : (\n            'NIL'\n          )}\n        </td>\n        <td>\n          <span\n            className={`status-label ${\n              item.Manual_Status === 'Approved'\n                ? 'approved'\n                : 'rejected'\n            }`}\n          >\n            {item.Manual_Status ? item.Manual_Status : item.Moderation_Results}\n          </span>\n        </td>\n        <td>\n          {item.Reason_For_Change\n            ? item.Reason_For_Change.split('\\n').map((line, index) => (\n                <div key={index}>{line}</div>\n              ))\n            : 'N/A'}\n        </td>\n        <td>\n          <img\n            src={`https://gc-cms-test-bucket.s3.ap-south-1.amazonaws.com/${item.file_name}`}\n            alt={`Preview of ${item.file_name}`}\n            className=\"preview-image\"\n            onClick={() =>\n              setSelectedImage(\n                `https://gc-cms-test-bucket.s3.ap-south-1.amazonaws.com/${item.file_name}`\n              )\n            }\n          />\n        </td>\n        <td>\n          <button onClick={() => handleManualReview(item)} className=\"button\">\n            Change Status\n          </button>\n        </td>\n      </tr>\n    ))}\n        </tbody>\n      </table>\n      {selectedImage && (\n        <div className=\"image-preview-popup\">\n          <img src={selectedImage} alt=\"Selected Preview\" />\n          <button onClick={() => setSelectedImage(null)}>Close Preview</button>\n        </div>\n      )}\n      {showReasonPopup && selectedItem && (\n        <div className=\"popup\">\n  <div className=\"popup-content\">\n    <span className=\"close\" onClick={handlePopupCancel}>&times;</span>\n    <h2>Reason for Status Change</h2>\n    <div className=\"popup-form\">\n    <div className={`input-container ${usernameError ? 'error' : ''}`}>\n      <label htmlFor=\"usernameInput\">Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>\n      <input\n        type=\"text\"\n        id=\"usernameInput\"\n        value={usernameInput}\n        onChange={event => setUsernameInput(event.target.value)}\n        placeholder=\"Enter your username\"\n      />\n      {usernameError && <div className=\"error-message\">Please enter a username.</div>}\n    </div>\n    <div className={`input-container ${reasonError ? 'error' : ''}`}>\n      <label htmlFor=\"reasonInput\">Reason:&nbsp;&nbsp;</label>\n      <textarea\n        id=\"reasonInput\"\n        value={reasonInput}\n        onChange={event => setReasonInput(event.target.value)}\n        placeholder=\"Enter reason here...\"\n      />\n      {reasonError && <div className=\"error-message\">Please enter a reason.</div>}\n    </div>\n      <div className=\"popup-buttons\">\n  <button onClick={() => handleReasonSubmit('Approved')} className=\"approve-button\">\n    Approve\n  </button>\n  <button onClick={() => handleReasonSubmit('Rejected')} className=\"reject-button\">\n    Reject\n  </button>\n  <button onClick={handlePopupCancel} className=\"cancel\">Cancel</button>\n</div>\n    </div>\n  </div>\n</div>\n\n      )}\n    </div>\n  );\n};\n\nexport default DynamoDBData;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}