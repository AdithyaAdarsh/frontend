{"ast":null,"code":"import _classCallCheck from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { createTransactionManager } from '../oidc/TransactionManager.js';\nimport { isRawIdxResponse } from './types/idx-js.js';\nfunction createIdxTransactionManager() {\n  var TransactionManager = createTransactionManager();\n  return /*#__PURE__*/function (_TransactionManager) {\n    _inherits(IdxTransactionManager, _TransactionManager);\n    var _super = _createSuper(IdxTransactionManager);\n    function IdxTransactionManager(options) {\n      _classCallCheck(this, IdxTransactionManager);\n      return _super.call(this, options);\n    }\n    _createClass(IdxTransactionManager, [{\n      key: \"clear\",\n      value: function clear() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        _get(_getPrototypeOf(IdxTransactionManager.prototype), \"clear\", this).call(this, options);\n        if (options.clearIdxResponse !== false) {\n          this.clearIdxResponse();\n        }\n      }\n    }, {\n      key: \"saveIdxResponse\",\n      value: function saveIdxResponse(data) {\n        if (!this.saveLastResponse) {\n          return;\n        }\n        var storage = this.storageManager.getIdxResponseStorage();\n        if (!storage) {\n          return;\n        }\n        storage.setStorage(data);\n      }\n    }, {\n      key: \"loadIdxResponse\",\n      value: function loadIdxResponse(options) {\n        if (!this.saveLastResponse) {\n          return null;\n        }\n        var storage = this.storageManager.getIdxResponseStorage();\n        if (!storage) {\n          return null;\n        }\n        var storedValue = storage.getStorage();\n        if (!storedValue || !isRawIdxResponse(storedValue.rawIdxResponse)) {\n          return null;\n        }\n        if (options) {\n          var interactionHandle = options.interactionHandle;\n          if (interactionHandle && storedValue.interactionHandle !== interactionHandle) {\n            return null;\n          }\n        }\n        return storedValue;\n      }\n    }, {\n      key: \"clearIdxResponse\",\n      value: function clearIdxResponse() {\n        if (!this.saveLastResponse) {\n          return;\n        }\n        var storage = this.storageManager.getIdxResponseStorage();\n        storage === null || storage === void 0 ? void 0 : storage.clearStorage();\n      }\n    }]);\n    return IdxTransactionManager;\n  }(TransactionManager);\n}\nexport { createIdxTransactionManager };","map":{"version":3,"names":["createIdxTransactionManager","TransactionManager","createTransactionManager","_TransactionManager","_inherits","IdxTransactionManager","_super","_createSuper","options","_classCallCheck","call","_createClass","key","value","clear","arguments","length","undefined","_get","_getPrototypeOf","prototype","clearIdxResponse","saveIdxResponse","data","saveLastResponse","storage","storageManager","getIdxResponseStorage","setStorage","loadIdxResponse","storedValue","getStorage","isRawIdxResponse","rawIdxResponse","interactionHandle","clearStorage"],"sources":["/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@okta/lib/idx/IdxTransactionManager.ts"],"sourcesContent":["import { ClearTransactionMetaOptions, TransactionManagerOptions } from '../oidc/types';\nimport { createTransactionManager } from '../oidc/TransactionManager';\nimport { IdxTransactionMeta, IntrospectOptions } from './types';\nimport { isRawIdxResponse } from './types/idx-js';\nimport { IdxStorageManagerInterface, SavedIdxResponse } from './types/storage';\n\nexport function createIdxTransactionManager\n<\n  M extends IdxTransactionMeta = IdxTransactionMeta,\n  S extends IdxStorageManagerInterface<M> = IdxStorageManagerInterface<M>\n>\n()\n{\n  const TransactionManager = createTransactionManager<M, S>();\n  return class IdxTransactionManager extends TransactionManager\n  {\n    constructor(options: TransactionManagerOptions) {\n      super(options);\n    }\n\n    clear(options: ClearTransactionMetaOptions = {}) {\n      super.clear(options);\n\n      if (options.clearIdxResponse !== false) {\n        this.clearIdxResponse();\n      }\n    }\n    \n    saveIdxResponse(data: SavedIdxResponse): void {\n      if (!this.saveLastResponse) {\n        return;\n      }\n      const storage = this.storageManager.getIdxResponseStorage();\n      if (!storage) {\n        return;\n      }\n      storage.setStorage(data);\n    }\n\n    // eslint-disable-next-line complexity\n    loadIdxResponse(options?: IntrospectOptions): SavedIdxResponse | null {\n      if (!this.saveLastResponse) {\n        return null;\n      }\n      const storage = this.storageManager.getIdxResponseStorage();\n      if (!storage) {\n        return null;\n      }\n      const storedValue = storage.getStorage();\n      if (!storedValue || !isRawIdxResponse(storedValue.rawIdxResponse)) {\n        return null;\n      }\n\n      if (options) {\n        const { interactionHandle } = options;\n        if (interactionHandle && storedValue.interactionHandle !== interactionHandle) {\n          return null;\n        }\n      }\n\n      return storedValue;\n    }\n\n    clearIdxResponse(): void {\n      if (!this.saveLastResponse) {\n        return;\n      }\n      const storage = this.storageManager.getIdxResponseStorage();\n      storage?.clearStorage();\n    }\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;SAMgBA,2BAA2BA,CAAA;EAOzC,IAAMC,kBAAkB,GAAGC,wBAAwB,EAAQ;EAC3D,8BAAAC,mBAAA;IAAAC,SAAA,CAAAC,qBAAA,EAAAF,mBAAA;IAAA,IAAAG,MAAA,GAAAC,YAAA,CAAAF,qBAAA;IAEE,SAAAA,sBAAYG,OAAkC;MAAAC,eAAA,OAAAJ,qBAAA;MAAA,OAAAC,MAAA,CAAAI,IAAA,OACtCF,OAAO;IACd;IAAAG,YAAA,CAAAN,qBAAA;MAAAO,GAAA;MAAAC,KAAA,EAED,SAAAC,MAAA,EAA+C;QAAA,IAAzCN,OAAA,GAAAO,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAuC,EAAE;QAC7CG,IAAA,CAAAC,eAAA,CAAAd,qBAAA,CAAAe,SAAA,kBAAAV,IAAA,OAAYF,OAAO;QAEnB,IAAIA,OAAO,CAACa,gBAAgB,KAAK,KAAK,EAAE;UACtC,IAAI,CAACA,gBAAgB,EAAE;QACxB;MACF;IAAA;MAAAT,GAAA;MAAAC,KAAA,EAED,SAAAS,gBAAgBC,IAAsB;QACpC,IAAI,CAAC,IAAI,CAACC,gBAAgB,EAAE;UAC1B;QACD;QACD,IAAMC,OAAO,GAAG,IAAI,CAACC,cAAc,CAACC,qBAAqB,EAAE;QAC3D,IAAI,CAACF,OAAO,EAAE;UACZ;QACD;QACDA,OAAO,CAACG,UAAU,CAACL,IAAI,CAAC;MACzB;IAAA;MAAAX,GAAA;MAAAC,KAAA,EAGD,SAAAgB,gBAAgBrB,OAA2B;QACzC,IAAI,CAAC,IAAI,CAACgB,gBAAgB,EAAE;UAC1B,OAAO,IAAI;QACZ;QACD,IAAMC,OAAO,GAAG,IAAI,CAACC,cAAc,CAACC,qBAAqB,EAAE;QAC3D,IAAI,CAACF,OAAO,EAAE;UACZ,OAAO,IAAI;QACZ;QACD,IAAMK,WAAW,GAAGL,OAAO,CAACM,UAAU,EAAE;QACxC,IAAI,CAACD,WAAW,IAAI,CAACE,gBAAgB,CAACF,WAAW,CAACG,cAAc,CAAC,EAAE;UACjE,OAAO,IAAI;QACZ;QAED,IAAIzB,OAAO,EAAE;UACX,IAAQ0B,iBAAiB,GAAK1B,OAAO,CAA7B0B,iBAAiB;UACzB,IAAIA,iBAAiB,IAAIJ,WAAW,CAACI,iBAAiB,KAAKA,iBAAiB,EAAE;YAC5E,OAAO,IAAI;UACZ;QACF;QAED,OAAOJ,WAAW;MACnB;IAAA;MAAAlB,GAAA;MAAAC,KAAA,EAED,SAAAQ,iBAAA,EAAgB;QACd,IAAI,CAAC,IAAI,CAACG,gBAAgB,EAAE;UAC1B;QACD;QACD,IAAMC,OAAO,GAAG,IAAI,CAACC,cAAc,CAACC,qBAAqB,EAAE;QAC3DF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEU,YAAY,EAAE;MACxB;IAAA;IAAA,OAAA9B,qBAAA;EAAA,EAvDwCJ,kBAAkB;AAyD/D"},"metadata":{},"sourceType":"module","externalDependencies":[]}