{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { post } from '../http/request.js';\nimport { STATE_TOKEN_KEY_NAME } from '../constants.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\nimport { addStateToken } from './util/stateToken.js';\nfunction transactionStatus(sdk, args) {\n  args = addStateToken(sdk, args);\n  return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args, {\n    withCredentials: true\n  });\n}\nfunction resumeTransaction(sdk, tx, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = getSavedStateToken(sdk);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to resume'));\n    }\n  }\n  return transactionStatus(sdk, args).then(function (res) {\n    return tx.createTransaction(res);\n  });\n}\nfunction introspectAuthn(sdk, tx, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = getSavedStateToken(sdk);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n    }\n  }\n  return transactionStep(sdk, args).then(function (res) {\n    return tx.createTransaction(res);\n  });\n}\nfunction transactionStep(sdk, args) {\n  args = addStateToken(sdk, args);\n  return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args, {\n    withCredentials: true\n  });\n}\nfunction transactionExists(sdk) {\n  return !!getSavedStateToken(sdk);\n}\nfunction postToTransaction(sdk, tx, url, args, options) {\n  options = Object.assign({\n    withCredentials: true\n  }, options);\n  return post(sdk, url, args, options).then(function (res) {\n    return tx.createTransaction(res);\n  });\n}\nfunction getSavedStateToken(sdk) {\n  const storage = sdk.options.storageUtil.storage;\n  return storage.get(STATE_TOKEN_KEY_NAME);\n}\nexport { getSavedStateToken, introspectAuthn, postToTransaction, resumeTransaction, transactionExists, transactionStatus, transactionStep };","map":{"version":3,"names":["transactionStatus","sdk","args","addStateToken","post","getIssuerOrigin","withCredentials","resumeTransaction","tx","stateToken","getSavedStateToken","Promise","reject","AuthSdkError","then","res","createTransaction","introspectAuthn","transactionStep","transactionExists","postToTransaction","url","options","Object","assign","storage","storageUtil","get","STATE_TOKEN_KEY_NAME"],"sources":["/Users/aadar00/Documents/image-moderation-app/frontend/node_modules/@okta/lib/authn/api.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity, max-statements */\nimport { post } from '../http';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport { STATE_TOKEN_KEY_NAME } from '../constants';\nimport { OktaAuthHttpInterface } from '../http/types';\nimport { OktaAuthStorageOptions } from '../storage/types';\nimport { addStateToken } from './util/stateToken';\nimport { AuthnTransactionAPI } from './types';\nimport { OktaAuthBaseInterface } from '../base/types';\n\nexport function transactionStatus(sdk: OktaAuthHttpInterface, args) {\n  args = addStateToken(sdk, args);\n  return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args, { withCredentials: true });\n}\n\nexport function resumeTransaction(sdk: OktaAuthHttpInterface, tx: AuthnTransactionAPI, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = getSavedStateToken(sdk);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to resume'));\n    }\n  }\n  return transactionStatus(sdk, args)\n    .then(function(res) {\n      return tx.createTransaction(res);\n    });\n}\n\nexport function introspectAuthn (sdk: OktaAuthHttpInterface, tx: AuthnTransactionAPI, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = getSavedStateToken(sdk);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n    }\n  }\n  return transactionStep(sdk, args)\n    .then(function (res) {\n      return tx.createTransaction(res);\n    });\n}\n\nexport function transactionStep(sdk: OktaAuthHttpInterface, args) {\n  args = addStateToken(sdk, args);\n  // v1 pipeline introspect API\n  return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args, { withCredentials: true });\n}\n\nexport function transactionExists(sdk: OktaAuthBaseInterface<OktaAuthStorageOptions>) {\n  // We have a cookie state token\n  return !!getSavedStateToken(sdk);\n}\n\nexport function postToTransaction(sdk: OktaAuthHttpInterface, tx: AuthnTransactionAPI, url: string, args, options?) {\n  options = Object.assign({ withCredentials: true }, options);\n  return post(sdk, url, args, options)\n    .then(function(res) {\n      return tx.createTransaction(res);\n    });\n}\n\nexport function getSavedStateToken(sdk: OktaAuthBaseInterface<OktaAuthStorageOptions>) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const storage = sdk.options.storageUtil!.storage;\n    return storage.get(STATE_TOKEN_KEY_NAME);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAuBgB,SAAAA,iBAAiBA,CAACC,GAA0B,EAAEC,IAAI;EAChEA,IAAI,GAAGC,aAAa,CAACF,GAAG,EAAEC,IAAI,CAAC;EAC/B,OAAOE,IAAI,CAACH,GAAG,EAAEA,GAAG,CAACI,eAAe,CAAE,IAAG,eAAe,EAAEH,IAAI,EAAE;IAAEI,eAAe,EAAE;EAAI,CAAE,CAAC;AAC5F;SAEgBC,iBAAiBA,CAACN,GAA0B,EAAEO,EAAuB,EAAEN,IAAI;EACzF,IAAI,CAACA,IAAI,IAAI,CAACA,IAAI,CAACO,UAAU,EAAE;IAC7B,IAAIA,UAAU,GAAGC,kBAAkB,CAACT,GAAG,CAAC;IACxC,IAAIQ,UAAU,EAAE;MACdP,IAAI,GAAG;QACLO,UAAU,EAAEA;OACb;IACF,OAAM;MACL,OAAOE,OAAO,CAACC,MAAM,CAAC,IAAIC,YAAY,CAAC,0BAA0B,CAAC,CAAC;IACpE;EACF;EACD,OAAOb,iBAAiB,CAACC,GAAG,EAAEC,IAAI,CAAC,CAChCY,IAAI,CAAC,UAASC,GAAG;IAChB,OAAOP,EAAE,CAACQ,iBAAiB,CAACD,GAAG,CAAC;EAClC,CAAC,CAAC;AACN;SAEgBE,eAAeA,CAAEhB,GAA0B,EAAEO,EAAuB,EAAEN,IAAI;EACxF,IAAI,CAACA,IAAI,IAAI,CAACA,IAAI,CAACO,UAAU,EAAE;IAC7B,IAAIA,UAAU,GAAGC,kBAAkB,CAACT,GAAG,CAAC;IACxC,IAAIQ,UAAU,EAAE;MACdP,IAAI,GAAG;QACLO,UAAU,EAAEA;OACb;IACF,OAAM;MACL,OAAOE,OAAO,CAACC,MAAM,CAAC,IAAIC,YAAY,CAAC,4BAA4B,CAAC,CAAC;IACtE;EACF;EACD,OAAOK,eAAe,CAACjB,GAAG,EAAEC,IAAI,CAAC,CAC9BY,IAAI,CAAC,UAAUC,GAAG;IACjB,OAAOP,EAAE,CAACQ,iBAAiB,CAACD,GAAG,CAAC;EAClC,CAAC,CAAC;AACN;AAEgB,SAAAG,eAAeA,CAACjB,GAA0B,EAAEC,IAAI;EAC9DA,IAAI,GAAGC,aAAa,CAACF,GAAG,EAAEC,IAAI,CAAC;EAE/B,OAAOE,IAAI,CAACH,GAAG,EAAEA,GAAG,CAACI,eAAe,CAAE,IAAG,0BAA0B,EAAEH,IAAI,EAAE;IAAEI,eAAe,EAAE;EAAI,CAAE,CAAC;AACvG;AAEM,SAAUa,iBAAiBA,CAAClB,GAAkD;EAElF,OAAO,CAAC,CAACS,kBAAkB,CAACT,GAAG,CAAC;AAClC;AAEM,SAAUmB,iBAAiBA,CAACnB,GAA0B,EAAEO,EAAuB,EAAEa,GAAW,EAAEnB,IAAI,EAAEoB,OAAQ;EAChHA,OAAO,GAAGC,MAAM,CAACC,MAAM,CAAC;IAAElB,eAAe,EAAE;EAAI,CAAE,EAAEgB,OAAO,CAAC;EAC3D,OAAOlB,IAAI,CAACH,GAAG,EAAEoB,GAAG,EAAEnB,IAAI,EAAEoB,OAAO,CAAC,CACjCR,IAAI,CAAC,UAASC,GAAG;IAChB,OAAOP,EAAE,CAACQ,iBAAiB,CAACD,GAAG,CAAC;EAClC,CAAC,CAAC;AACN;AAEM,SAAUL,kBAAkBA,CAACT,GAAkD;EAEjF,MAAMwB,OAAO,GAAGxB,GAAG,CAACqB,OAAO,CAACI,WAAY,CAACD,OAAO;EAChD,OAAOA,OAAO,CAACE,GAAG,CAACC,oBAAoB,CAAC;AAC5C"},"metadata":{},"sourceType":"module","externalDependencies":[]}